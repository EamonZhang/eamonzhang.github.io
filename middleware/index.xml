<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Middlewares on Let&#39;s go ğŸŒ ğŸŒ ğŸŒ</title>
    <link>https://zhangeamon.top/middleware/</link>
    <description>Recent content in Middlewares on Let&#39;s go ğŸŒ ğŸŒ ğŸŒ</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-CN</language>
    <lastBuildDate>Fri, 25 Mar 2022 15:31:27 +0800</lastBuildDate><atom:link href="https://zhangeamon.top/middleware/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Haproxy  ç¼–è¯‘å®‰è£…é…ç½® </title>
      <link>https://zhangeamon.top/middleware/haproxy_install/</link>
      <pubDate>Fri, 25 Mar 2022 15:31:27 +0800</pubDate>
      
      <guid>https://zhangeamon.top/middleware/haproxy_install/</guid>
      <description>ç¼–è¯‘å®‰è£…Haproxy 2.4 ä¸‹è½½é¢„å¤‡ sudo wget https://www.haproxy.org/download/2.4/src/haproxy-2.4.15.tar.gz -O /usr/local/src/haproxy-2.4.15.tar.gz sudo wget http://www.lua.org/ftp/lua-5.3.5.tar.gz -O /usr/local/src/lua-5.3.5.tar.gz sudo yum install make gcc build-essential libssl-devel zlib1g-devel pcre3 pcre3-devel systemd-devel readline-devel openssl openssl-devel -y ç¼–è¯‘å®‰è£… lua cd /usr/local/src &amp;amp;&amp;amp; tar -zxvf lua-5.3.5.tar.gz cd /usr/local/src/lua-5.3.5 &amp;amp;&amp;amp; make linux src/lua -v haproxy cd /usr/local/src &amp;amp;&amp;amp; tar -zxvf haproxy-2.4.15.tar.gz cd /usr/local/src/haproxy-2.4.15 make -j `lscpu |awk &#39;NR==4{print $2}&#39;` ARCH=x86_64 TARGET=linux-glibc USE_PCRE=1 USE_ZLIB=1 USE_SYSTEMD=1 USE_CPU_AFFINITY=1 USE_LUA=1 LUA_INC=/usr/local/src/lua-5.3.5/src/ LUA_LIB=/usr/local/src/lua-5.3.5/src/ PREFIX=/usr/local/haproxy make install PREFIX=/usr/local/haproxy /usr/local/haproxy/sbin/haproxy -v å¦‚æœæƒ³æ·»åŠ  openssl æ”¯æŒå‚è€ƒ In order to link OpenSSL statically against HAProxy, first download OpenSSL from https://www.openssl.org/ then build it with the &amp;quot;no-shared&amp;quot; keyword and install it to a local directory, so your system is not affected : $ export STATICLIBSSL=/tmp/staticlibssl $ ./config --prefix=$STATICLIBSSL no-shared</description>
    </item>
    
    <item>
      <title>é…ç½®ç®¡ç† confd</title>
      <link>https://zhangeamon.top/middleware/confd/</link>
      <pubDate>Fri, 02 Apr 2021 15:26:49 +0800</pubDate>
      
      <guid>https://zhangeamon.top/middleware/confd/</guid>
      <description>https://github.com/kelseyhightower/confd é…ç½®ä¿¡æ¯å­˜æ”¾åœ¨ectd KVå­˜å‚¨ä¸­ æ›´æ–° ectd ä¸­çš„å†…å®¹ï¼Œ confd è´Ÿè´£å°†å˜æ›´åŒæ­¥åˆ°æœ¬åœ°æœåŠ¡é…ç½®æ–‡ä»¶ï¼Œå¹¶é€šçŸ¥æœ¬åœ°æœåŠ¡è¿›è¡Œé‡æ–°åŠ è½½é‡å¯ç­‰ã€‚</description>
    </item>
    
    <item>
      <title>etcd è®¿é—®æ§åˆ¶</title>
      <link>https://zhangeamon.top/middleware/etcd_auth/</link>
      <pubDate>Fri, 29 Jan 2021 09:37:26 +0800</pubDate>
      
      <guid>https://zhangeamon.top/middleware/etcd_auth/</guid>
      <description>ä»‹ç» etcd é»˜è®¤æ²¡æœ‰å¼€å¯è®¿é—®æ§åˆ¶ã€‚ åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å±äºè£¸å¥”ã€‚ å¼€å¯è®¿é—®æ§åˆ¶æœ‰ä¸¤ç§æ–¹å¼ å¯†é’¥è¯ä¹¦éªŒè¯ ç”¨æˆ·åå¯†ç éªŒè¯ æœ¬ç¯‡å®éªŒç”¨æˆ·åå¯†ç éªŒè¯æ–¹å¼ ç”¨æˆ· å¼€å¯è®¿é—®è®¤è¯éœ€è¦åˆ›å»ºroot ç”¨æˆ·ï¼Œroot ç”¨æˆ·é»˜è®¤è‡ªåŠ¨æ‹¥æœ‰rootè§’è‰²çš„æƒé™ï¼ŒåŠè¶…çº§ç®¡ç†å‘˜ã€‚ è§’è‰² è§’è‰²ç†è§£ä¸ºæŒ‡å®šæƒé™çš„é›†åˆï¼Œæƒé™åŒ…æ‹¬ read ã€writeã€ readwrite</description>
    </item>
    
    <item>
      <title>Consul DNS æœåŠ¡å‘ç°</title>
      <link>https://zhangeamon.top/middleware/consul/</link>
      <pubDate>Mon, 29 Jun 2020 11:09:52 +0800</pubDate>
      
      <guid>https://zhangeamon.top/middleware/consul/</guid>
      <description>å®ç°ç›®æ ‡ å¤šIPè§£æï¼Œè´Ÿè½½è½®è¯¢ è‡ªåŠ¨æ£€æŸ¥åç«¯æœåŠ¡çŠ¶æ€ï¼Œè‡ªåŠ¨å‰”é™¤ä¸å¯ç”¨åç«¯ åˆ«åé…ç½® ä¸Šæ¸¸DNSæ”¯æŒ ttl cache æ”¯æŒ å‰ä¸¤ç‚¹ç”±cousulå®ç° åä¸¤ç‚¹ç”±dnsmasqå®ç° åˆ«åé…ç½®æœªå®ç° ç®€å•åº”ç”¨ é›†ç¾¤é…ç½® 10.1.88.84 10.1.88.85 10.1.88.86 consul agent -server -bootstrap-expect=3 -data-dir=/tmp/consul -node=10.1.88.84 -bind=10.1.88.84 -client=0.0.0.0 -datacenter=bj -domain=zhangeamon.com -config-dir=/etc/consul.d -ui consul agent -server -bootstrap-expect=3 -data-dir=/tmp/consul -node=10.1.88.85 -bind=10.1.88.85 -client=0.0.0.0 -datacenter=bj -domain=zhangeamon.com -join=10.1.88.84 -config-dir=/etc/consul.d -ui consul agent -server -bootstrap-expect=3 -data-dir=/tmp/consul -node=10.1.88.86 -bind=10.1.88.86 -client=0.0.0.0 -datacenter=bj -domain=zhangeamon.com -join=10.1.88.84 -config-dir=/etc/consul.d -ui æœåŠ¡å‘ç°é…ç½® cat /etc/consul.d/web/json { &amp;quot;services&amp;quot;:[</description>
    </item>
    
    <item>
      <title>coredns</title>
      <link>https://zhangeamon.top/middleware/coredns/</link>
      <pubDate>Mon, 22 Jun 2020 13:25:08 +0800</pubDate>
      
      <guid>https://zhangeamon.top/middleware/coredns/</guid>
      <description>èƒŒæ™¯ è‡´åŠ›äºæ‰“é€ äº‘åŸç”Ÿä¸­çš„dnsæœåŠ¡å’ŒæœåŠ¡å‘ç°ã€‚ å„ç§åŠŸèƒ½éƒ½æ˜¯é€šè¿‡æ’ä»¶æ–¹å¼å®ç° ç®€å•ä¾‹å­ æœåŠ¡ cat /usr/lib/systemd/system/coredns.service [Unit] Description=CoreDNS DNS server Documentation=https://coredns.io After=network.target [Service] PermissionsStartOnly=true LimitNOFILE=1048576 LimitNPROC=512 CapabilityBoundingSet=CAP_NET_BIND_SERVICE AmbientCapabilities=CAP_NET_BIND_SERVICE NoNewPrivileges=true User=coredns WorkingDirectory=~ ExecStart=/usr/local/bin/coredns -conf=/etc/coredns/Corefile ExecReload=/bin/kill -SIGUSR1 $MAINPID Restart=on-failure [Install] WantedBy=multi-user.target é…ç½®æ–‡ä»¶ cat /etc/coredns/Corefile .:53 { # ç»‘å®šinterface ip bind 127.0.0.1 # å…ˆèµ°æœ¬æœºçš„hosts # https://coredns.io/plugins/hosts/ hosts { # è‡ªå®šä¹‰sms.service search.service çš„è§£æ # å› ä¸ºè§£æçš„åŸŸåå°‘æˆ‘ä»¬è¿™é‡Œç›´æ¥</description>
    </item>
    
    <item>
      <title>nginx</title>
      <link>https://zhangeamon.top/middleware/nginx/</link>
      <pubDate>Tue, 09 Apr 2019 15:42:15 +0800</pubDate>
      
      <guid>https://zhangeamon.top/middleware/nginx/</guid>
      <description>æ€§èƒ½ä¼˜åŒ– CPU äº²å’Œæ€§ worker_processes 4; # æ¯”å¦‚ç‰©ç†CPUçš„æ•°é‡ä¸º4 worker_cpu_affinity 0001 0010 0100 1000; Nginxæœ€å¤§æ‰“å¼€æ–‡ä»¶æ•° worker_rlimit_nofile 65535; ulimit -nçš„å€¼ä¿æŒä¸€è‡´ GZIP å‹ç¼© èŠ‚çº¦å¸¦å®½ï¼ŒåŠ å¿«ä¼ è¾“é€Ÿåº¦ã€‚éœ€è¦CPUèµ„æº å‹ç¼©ï¼š æ–‡æœ¬ï¼Œjsï¼Œhtmlï¼Œcssï¼Œä¸å‹ç¼©: å›¾ç‰‡ï¼Œè§†é¢‘ï¼Œflash gzip on; # å¼€å¯ gzip_min_length 2k; # å°äº 2k ä¸å‹ç¼© gzip_buffers 4 32k; # å‹ç¼©ç¼“å†²åŒº gzip_http_version 1.1; gzip_comp_level 6; # å‹ç¼©æ¯”ä¾‹ 1-9 ,9</description>
    </item>
    
    <item>
      <title>DNS Bind9 &amp; NamedManager </title>
      <link>https://zhangeamon.top/middleware/bind9/</link>
      <pubDate>Thu, 04 Apr 2019 15:14:47 +0800</pubDate>
      
      <guid>https://zhangeamon.top/middleware/bind9/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Centos FTP æœåŠ¡</title>
      <link>https://zhangeamon.top/middleware/vsftp/</link>
      <pubDate>Wed, 05 Dec 2018 09:24:29 +0800</pubDate>
      
      <guid>https://zhangeamon.top/middleware/vsftp/</guid>
      <description>åˆ©ç”¨vsftpd æ­å»ºFTP æœåŠ¡å™¨ å®‰è£… yum -y install vsftpd æ·»åŠ ç”¨æˆ·åŠè®¾ç½®å¯†ç  useradd -s /sbin/nologin -d /home/ftp_test ftp_test passwd ftp_test -s ç¦æ­¢sshç™»å½•ä¸»æœº -d è®¾ç½®ftp_test ç”¨æˆ·home ç›®å½•ï¼Œç”¨äºå­˜æ”¾æ•°æ® åŸºç¡€é…ç½® vi /etc/vsftpd/vsftpd.conf # ç¦æ­¢åŒ¿åè®¿é—® anonymous_enable=NO # ç¦æ­¢dnsè§£æ reverse_lookup_enable=NO å¯åŠ¨&amp;amp;å¼€æœºè‡ªå¯ systemctl start vsftpd.service systemctl enable vsftpd.service filezilla å®¢æˆ·ç«¯éªŒè¯ host: æœåŠ¡å™¨IP port: é»˜è®¤ user: password: æµ‹è¯•æœ¬åœ°ä¸Šä¼ ï¼Œè¿œ</description>
    </item>
    
    <item>
      <title>Haproxy ç®—æ³•</title>
      <link>https://zhangeamon.top/middleware/haproxy/</link>
      <pubDate>Mon, 26 Nov 2018 08:53:09 +0800</pubDate>
      
      <guid>https://zhangeamon.top/middleware/haproxy/</guid>
      <description>blance roundrobin # è½®è¯¢ï¼Œè½¯è´Ÿè½½å‡è¡¡åŸºæœ¬éƒ½å…·å¤‡è¿™ç§ç®—æ³• balance static-rr # æ ¹æ®æƒé‡ï¼Œä¸æ”¯æŒæ…¢å¯åŠ¨ ã€‚å»ºè®®ä½¿ç”¨ balance leastconn # æœ€å°‘è¿æ¥è€…å…ˆå¤„ç†ï¼Œå»ºè®®ä½¿ç”¨ balance source # æ ¹æ®è¯·æ±‚æºIPï¼Œå»ºè®®ä½¿ç”¨ balance uri # æ ¹æ®è¯·æ±‚çš„URI balance url_paramï¼Œ# æ ¹æ®è¯·æ±‚çš„URlå‚æ•°&amp;rsquo;balance url_param&#39; requires an URL parameter name balance hdr(name) # æ ¹æ®HTTPè¯·æ±‚å¤´æ¥é”å®šæ¯ä¸€</description>
    </item>
    
    <item>
      <title>Sysbench æµ‹è¯•</title>
      <link>https://zhangeamon.top/middleware/sysbench/</link>
      <pubDate>Fri, 16 Nov 2018 19:25:45 +0800</pubDate>
      
      <guid>https://zhangeamon.top/middleware/sysbench/</guid>
      <description>ä¸‹è½½å®‰è£… 1.0.15 sysbenchå®˜ç½‘ curl -s https://packagecloud.io/install/repositories/akopytov/sysbench/script.rpm.sh | sudo bash sudo yum -y install sysbench å‚æ•°è¯´æ˜ sysbench --help Usage: sysbench [options]... [testname] [command] Commands implemented by most tests: prepare run cleanup help General options: --threads=N number of threads to use [1] çº¿ç¨‹æ•° --events=N limit for total number of events [0] äº‹åŠ¡æ•° --time=N limit for total execution time in seconds [10] æµ‹å‹æ—¶é—´ --forced-shutdown=STRING number of seconds to wait after the --time limit before forcing shutdown, or &#39;off&#39; to disable [off] --thread-stack-size=SIZE size of stack per thread [64K] --rate=N average transactions rate. 0 for unlimited rate [0] --report-interval=N periodically report intermediate statistics with a specified interval in seconds. 0 disables intermediate reports [0] --report-checkpoints=[LIST,...] dump full statistics and reset all counters</description>
    </item>
    
    <item>
      <title>Keepalived é—®é¢˜é›†</title>
      <link>https://zhangeamon.top/middleware/keepalived01/</link>
      <pubDate>Mon, 05 Nov 2018 10:08:23 +0800</pubDate>
      
      <guid>https://zhangeamon.top/middleware/keepalived01/</guid>
      <description>é—®é¢˜æè¿° Q1 ip address associated with VRID 51 not present in MASTER advert : 10.1.7.58 å…¶ä¸­ 51 ä¸º virtual_router_id 10.1.7.58 ä¸ºè™šæ‹ŸIP å¯èƒ½åŸå›  ntp æ—¶é—´ä¸åŒæ­¥ å±€åŸŸç½‘å†… virtual_router_id ä¸å…¶ä»–é›†ç¾¤é…ç½®å†²çªã€‚ å¦å¤– router_id ä¸»æœºæ ‡ç¤ºï¼Œä¸€èˆ¬ä¸ºhostnameå³å¯ã€‚ è§£å†³æ–¹æ³•ï¼š unicast_peer{ } é…ç½®æˆå•æ’­æ¨¡å¼ Q2 keepalived pingä¸é€š è§£å†³åŠæ³•,æ³¨é‡Šæ‰é…ç½®æ–‡ä»¶ä¸­çš„ vrrp_strict Q3 not a regular file è§£å†³æ–¹æ³• chmod 644 keepalived.conf Q4 virtual_server è¯¥éƒ¨åˆ†æ˜¯ç”¨æ¥ç®¡ç†LVSçš„ï¼Œ</description>
    </item>
    
    <item>
      <title>ä»£ç†</title>
      <link>https://zhangeamon.top/middleware/proxy/</link>
      <pubDate>Wed, 31 Oct 2018 14:42:10 +0800</pubDate>
      
      <guid>https://zhangeamon.top/middleware/proxy/</guid>
      <description>ç§‘æ™® æ­£å‘ä»£ç† å¯¹æœåŠ¡ç«¯æ¥è¯´æ˜¯æ— æ„Ÿçš„ï¼ŒæœåŠ¡ç«¯æ— éœ€é…ç½®ï¼Œè¦åœ¨å®¢æˆ·ç«¯æŒ‡å®šã€‚ä»£ç†çš„æ˜¯å®¢æˆ·ç«¯ã€‚ è®¿é—®åŸæ¥æ— æ³•è®¿é—®çš„èµ„æº ç”¨ä½œç¼“å­˜ï¼ŒåŠ é€Ÿè®¿é—®é€Ÿåº¦ å¯¹å®¢æˆ·ç«¯è®¿é—®æˆæƒï¼Œä¸Šç½‘è¿›è¡Œè®¤è¯ ä»£ç†å¯ä»¥è®°å½•ç”¨æˆ·è®¿é—®è®°å½•ï¼ˆä¸Šç½‘è¡Œä¸ºç®¡ç†ï¼‰ï¼Œå¯¹å¤–éšè—ç”¨æˆ·ä¿¡æ¯ åå‘ä»£ç† å¯¹å®¢æˆ·ç«¯æ¥è¯´çš„æ— æ„Ÿçš„ï¼Œå®¢æˆ·ç«¯æ— éœ€é…ç½®ï¼Œè¦åœ¨æœåŠ¡ç«¯å®ç°ã€‚ä»£ç†</description>
    </item>
    
  </channel>
</rss>
